<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Attendance Management System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
    tailwind.config = {
        theme: {
            extend: {
                borderRadius: {
                    lg: "var(--radius)",
                    md: "calc(var(--radius) - 2px)",
                    sm: "calc(var(--radius) - 4px)",
                },
                colors: {
                    background: "var(--background)",
                    foreground: "var(--foreground)",
                    card: {
                        DEFAULT: "var(--card)",
                        foreground: "var(--card-foreground)",
                    },
                    primary: {
                        DEFAULT: "var(--primary)",
                        foreground: "var(--primary-foreground)",
                    },
                    secondary: {
                        DEFAULT: "var(--secondary)",
                        foreground: "var(--secondary-foreground)",
                    },
                    muted: {
                        DEFAULT: "var(--muted)",
                        foreground: "var(--muted-foreground)",
                    },
                    accent: {
                        DEFAULT: "var(--accent)",
                        foreground: "var(--accent-foreground)",
                    },
                    destructive: {
                        DEFAULT: "var(--destructive)",
                        foreground: "var(--destructive-foreground)",
                    },
                    border: "var(--border)",
                    input: "var(--input)",
                    ring: "var(--ring)",
                }
            }
        }
    };
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --background: hsl(0 0% 96%);
            --foreground: hsl(0 0% 13%);
            --card: hsl(0 0% 100%);
            --card-foreground: hsl(0 0% 13%);
            --primary: hsl(210 79% 46%);
            --primary-foreground: hsl(0 0% 100%);
            --secondary: hsl(122 39% 49%);
            --secondary-foreground: hsl(0 0% 100%);
            --muted: hsl(0 0% 90%);
            --muted-foreground: hsl(0 0% 45%);
            --accent: hsl(14 91% 64%);
            --accent-foreground: hsl(0 0% 100%);
            --destructive: hsl(4 90% 58%);
            --destructive-foreground: hsl(0 0% 100%);
            --border: hsl(0 0% 89%);
            --input: hsl(0 0% 95%);
            --ring: hsl(210 79% 46%);
            --radius: 8px;
        }
        
        body {
            font-family: 'Roboto', sans-serif;
        }
        
        .view {
            display: none;
        }
        
        .view.active {
            display: block;
        }
        
        .attendance-status {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
        }
        
        .status-present {
            background-color: var(--secondary);
        }
        
        .status-absent {
            background-color: var(--destructive);
        }
        
        .status-unmarked {
            background-color: var(--muted);
        }
    </style>
</head>
<body class="bg-background text-foreground">
    <!-- @COMPONENT: AppHeader -->
    <header id="app-header" class="bg-card shadow-sm border-b border-border" style="display: none;">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <i class="fas fa-graduation-cap text-primary text-2xl"></i>
                    <h1 class="text-xl font-semibold text-foreground">Attendance Management</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <span id="user-name" class="text-muted-foreground">Loading...</span>
                    <button onclick="logout()" class="bg-destructive text-destructive-foreground px-4 py-2 rounded-md hover:bg-red-600 transition-colors">
                        <i class="fas fa-sign-out-alt mr-2"></i>Logout
                    </button>
                </div>
            </div>
        </div>
    </header>
    <!-- @END_COMPONENT: AppHeader -->

    <!-- @COMPONENT: LoginView -->
    <div id="login-view" class="view active min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/5 to-secondary/5">
        <div class="bg-card p-8 rounded-lg shadow-lg w-full max-w-md border border-border">
            <div class="text-center mb-8">
                <i class="fas fa-graduation-cap text-primary text-4xl mb-4"></i>
                <h1 class="text-2xl font-bold text-foreground">Attendance System</h1>
                <p class="text-muted-foreground mt-2">Sign in to continue</p>
            </div>
            
            <form onsubmit="handleLogin(event)">
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-foreground mb-2">User Role</label>
                        <select id="user-role" class="w-full px-3 py-2 border border-border rounded-md bg-input focus:outline-none focus:ring-2 focus:ring-ring">
                            <option value="">Select Role</option>
                            <option value="teacher">Teacher</option>
                            <option value="student">Student</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-foreground mb-2">Email</label>
                        <input type="email" id="email" class="w-full px-3 py-2 border border-border rounded-md bg-input focus:outline-none focus:ring-2 focus:ring-ring" placeholder="Enter your email" required>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-foreground mb-2">Password</label>
                        <input type="password" id="password" class="w-full px-3 py-2 border border-border rounded-md bg-input focus:outline-none focus:ring-2 focus:ring-ring" placeholder="Enter your password" required>
                    </div>
                    
                    <div id="login-error" class="text-destructive text-sm hidden">
                        <i class="fas fa-exclamation-circle mr-1"></i>
                        Invalid credentials. Please try again.
                    </div>
                    
                    <button type="submit" class="w-full bg-primary text-primary-foreground py-2 px-4 rounded-md hover:bg-blue-700 transition-colors font-medium">
                        <i class="fas fa-sign-in-alt mr-2"></i>Sign In
                    </button>
                </div>
            </form>
        </div>
    </div>
    <!-- @END_COMPONENT: LoginView -->

    <!-- @COMPONENT: TeacherDashboard -->
    <div id="teacher-view" class="view">
        <div class="container mx-auto px-4 py-6">
            <!-- Selection Panel -->
            <div class="bg-card rounded-lg shadow-sm border border-border p-6 mb-6">
                <h2 class="text-lg font-semibold text-foreground mb-4 flex items-center">
                    <i class="fas fa-cogs text-primary mr-2"></i>Class Selection
                </h2>
                
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-foreground mb-2">Batch</label>
                        <select id="batch-select" onchange="loadSemesters()" class="w-full px-3 py-2 border border-border rounded-md bg-input focus:outline-none focus:ring-2 focus:ring-ring">
                            <option value="">Select Batch</option>
                            <option value="2021">Batch 2021</option>
                            <option value="2022">Batch 2022</option>
                            <option value="2023">Batch 2023</option>
                            <option value="2024">Batch 2024</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-foreground mb-2">Semester</label>
                        <select id="semester-select" onchange="loadSubjects()" class="w-full px-3 py-2 border border-border rounded-md bg-input focus:outline-none focus:ring-2 focus:ring-ring" disabled>
                            <option value="">Select Semester</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-foreground mb-2">Subject</label>
                        <select id="subject-select" onchange="loadStudents()" class="w-full px-3 py-2 border border-border rounded-md bg-input focus:outline-none focus:ring-2 focus:ring-ring" disabled>
                            <option value="">Select Subject</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-foreground mb-2">Date</label>
                        <input type="date" id="attendance-date" class="w-full px-3 py-2 border border-border rounded-md bg-input focus:outline-none focus:ring-2 focus:ring-ring">
                    </div>
                </div>
                
                <div class="mt-4 flex space-x-3">
                    <button onclick="loadAttendance()" class="bg-primary text-primary-foreground px-4 py-2 rounded-md hover:bg-blue-700 transition-colors">
                        <i class="fas fa-search mr-2"></i>Load Attendance
                    </button>
                    <button onclick="markAllPresent()" class="bg-secondary text-secondary-foreground px-4 py-2 rounded-md hover:bg-green-600 transition-colors" disabled>
                        <i class="fas fa-check-double mr-2"></i>Mark All Present
                    </button>
                    <button onclick="saveAttendance()" class="bg-accent text-accent-foreground px-4 py-2 rounded-md hover:bg-orange-600 transition-colors" disabled>
                        <i class="fas fa-save mr-2"></i>Save Attendance
                    </button>
                </div>
            </div>

            <!-- Student List -->
            <div id="student-list-container" class="bg-card rounded-lg shadow-sm border border-border hidden">
                <div class="px-6 py-4 border-b border-border">
                    <h3 class="text-lg font-semibold text-foreground flex items-center">
                        <i class="fas fa-users text-primary mr-2"></i>Student Attendance
                        <span id="attendance-info" class="ml-auto text-sm text-muted-foreground"></span>
                    </h3>
                </div>
                
                <div class="p-6">
                    <div class="mb-4">
                        <input type="text" id="student-search" placeholder="Search students..." class="w-full md:w-80 px-3 py-2 border border-border rounded-md bg-input focus:outline-none focus:ring-2 focus:ring-ring">
                    </div>
                    
                    <div class="overflow-x-auto">
                        <table class="w-full border-collapse">
                            <thead>
                                <tr class="border-b border-border">
                                    <th class="text-left py-3 px-4 font-medium text-foreground">Roll No.</th>
                                    <th class="text-left py-3 px-4 font-medium text-foreground">Student Name</th>
                                    <th class="text-left py-3 px-4 font-medium text-foreground">Email</th>
                                    <th class="text-center py-3 px-4 font-medium text-foreground">Attendance</th>
                                </tr>
                            </thead>
                            <tbody id="student-table-body">
                                <!-- @MAP: students.map(student => ( -->
                                <tr class="border-b border-border hover:bg-muted/50" data-mock="true">
                                    <td class="py-3 px-4 text-foreground">CS001</td>
                                    <td class="py-3 px-4 text-foreground">John Doe</td>
                                    <td class="py-3 px-4 text-muted-foreground">john.doe@email.com</td>
                                    <td class="py-3 px-4 text-center">
                                        <div class="flex justify-center space-x-2">
                                            <button onclick="markAttendance(this, 'present')" class="bg-secondary text-secondary-foreground px-3 py-1 rounded text-sm hover:bg-green-600 transition-colors">
                                                <i class="fas fa-check mr-1"></i>Present
                                            </button>
                                            <button onclick="markAttendance(this, 'absent')" class="bg-destructive text-destructive-foreground px-3 py-1 rounded text-sm hover:bg-red-600 transition-colors">
                                                <i class="fas fa-times mr-1"></i>Absent
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="border-b border-border hover:bg-muted/50" data-mock="true">
                                    <td class="py-3 px-4 text-foreground">CS002</td>
                                    <td class="py-3 px-4 text-foreground">Jane Smith</td>
                                    <td class="py-3 px-4 text-muted-foreground">jane.smith@email.com</td>
                                    <td class="py-3 px-4 text-center">
                                        <div class="flex justify-center space-x-2">
                                            <button onclick="markAttendance(this, 'present')" class="bg-secondary text-secondary-foreground px-3 py-1 rounded text-sm hover:bg-green-600 transition-colors">
                                                <i class="fas fa-check mr-1"></i>Present
                                            </button>
                                            <button onclick="markAttendance(this, 'absent')" class="bg-destructive text-destructive-foreground px-3 py-1 rounded text-sm hover:bg-red-600 transition-colors">
                                                <i class="fas fa-times mr-1"></i>Absent
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="border-b border-border hover:bg-muted/50" data-mock="true">
                                    <td class="py-3 px-4 text-foreground">CS003</td>
                                    <td class="py-3 px-4 text-foreground">Mike Johnson</td>
                                    <td class="py-3 px-4 text-muted-foreground">mike.johnson@email.com</td>
                                    <td class="py-3 px-4 text-center">
                                        <div class="flex justify-center space-x-2">
                                            <button onclick="markAttendance(this, 'present')" class="bg-secondary text-secondary-foreground px-3 py-1 rounded text-sm hover:bg-green-600 transition-colors">
                                                <i class="fas fa-check mr-1"></i>Present
                                            </button>
                                            <button onclick="markAttendance(this, 'absent')" class="bg-destructive text-destructive-foreground px-3 py-1 rounded text-sm hover:bg-red-600 transition-colors">
                                                <i class="fas fa-times mr-1"></i>Absent
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <!-- @END_MAP )) -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <!-- Attendance Summary -->
            <div id="attendance-summary" class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-4 hidden">
                <div class="bg-card rounded-lg shadow-sm border border-border p-6">
                    <div class="flex items-center">
                        <div class="bg-secondary/10 rounded-full p-3">
                            <i class="fas fa-user-check text-secondary text-xl"></i>
                        </div>
                        <div class="ml-4">
                            <h4 class="text-sm font-medium text-muted-foreground">Present</h4>
                            <p id="present-count" class="text-2xl font-bold text-secondary">0</p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-card rounded-lg shadow-sm border border-border p-6">
                    <div class="flex items-center">
                        <div class="bg-destructive/10 rounded-full p-3">
                            <i class="fas fa-user-times text-destructive text-xl"></i>
                        </div>
                        <div class="ml-4">
                            <h4 class="text-sm font-medium text-muted-foreground">Absent</h4>
                            <p id="absent-count" class="text-2xl font-bold text-destructive">0</p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-card rounded-lg shadow-sm border border-border p-6">
                    <div class="flex items-center">
                        <div class="bg-muted rounded-full p-3">
                            <i class="fas fa-users text-muted-foreground text-xl"></i>
                        </div>
                        <div class="ml-4">
                            <h4 class="text-sm font-medium text-muted-foreground">Total</h4>
                            <p id="total-count" class="text-2xl font-bold text-foreground">0</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- @END_COMPONENT: TeacherDashboard -->

    <!-- @COMPONENT: StudentView -->
    <div id="student-view" class="view">
        <div class="container mx-auto px-4 py-6">
            <!-- Student Info Card -->
            <div class="bg-card rounded-lg shadow-sm border border-border p-6 mb-6">
                <div class="flex items-center space-x-4">
                    <div class="bg-primary/10 rounded-full p-4">
                        <i class="fas fa-user-graduate text-primary text-2xl"></i>
                    </div>
                    <div>
                        <h2 class="text-xl font-semibold text-foreground" data-bind="student.name">Sarah Wilson</h2>
                        <p class="text-muted-foreground" data-bind="student.rollNo">Roll No: CS004</p>
                        <p class="text-muted-foreground" data-bind="student.batch">Batch: 2022 | Semester: 6</p>
                    </div>
                    <div class="ml-auto">
                        <div class="text-right">
                            <p class="text-sm text-muted-foreground">Overall Attendance</p>
                            <p class="text-2xl font-bold text-secondary" data-bind="student.attendancePercentage">87.5%</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Attendance Filter -->
            <div class="bg-card rounded-lg shadow-sm border border-border p-6 mb-6">
                <h3 class="text-lg font-semibold text-foreground mb-4 flex items-center">
                    <i class="fas fa-filter text-primary mr-2"></i>Filter Attendance
                </h3>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-foreground mb-2">Subject</label>
                        <select id="student-subject-filter" onchange="filterStudentAttendance()" class="w-full px-3 py-2 border border-border rounded-md bg-input focus:outline-none focus:ring-2 focus:ring-ring">
                            <option value="">All Subjects</option>
                            <option value="mathematics">Mathematics</option>
                            <option value="physics">Physics</option>
                            <option value="chemistry">Chemistry</option>
                            <option value="computer-science">Computer Science</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-foreground mb-2">From Date</label>
                        <input type="date" id="from-date" onchange="filterStudentAttendance()" class="w-full px-3 py-2 border border-border rounded-md bg-input focus:outline-none focus:ring-2 focus:ring-ring">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-foreground mb-2">To Date</label>
                        <input type="date" id="to-date" onchange="filterStudentAttendance()" class="w-full px-3 py-2 border border-border rounded-md bg-input focus:outline-none focus:ring-2 focus:ring-ring">
                    </div>
                </div>
            </div>

            <!-- Attendance Records -->
            <div class="bg-card rounded-lg shadow-sm border border-border">
                <div class="px-6 py-4 border-b border-border">
                    <h3 class="text-lg font-semibold text-foreground flex items-center">
                        <i class="fas fa-calendar-check text-primary mr-2"></i>Attendance Records
                        <span class="ml-auto text-sm text-muted-foreground">Last 30 days</span>
                    </h3>
                </div>
                
                <div class="p-6">
                    <div class="overflow-x-auto">
                        <table class="w-full border-collapse">
                            <thead>
                                <tr class="border-b border-border">
                                    <th class="text-left py-3 px-4 font-medium text-foreground">Date</th>
                                    <th class="text-left py-3 px-4 font-medium text-foreground">Subject</th>
                                    <th class="text-left py-3 px-4 font-medium text-foreground">Teacher</th>
                                    <th class="text-center py-3 px-4 font-medium text-foreground">Status</th>
                                </tr>
                            </thead>
                            <tbody id="student-attendance-table">
                                <!-- @MAP: attendanceRecords.map(record => ( -->
                                <tr class="border-b border-border hover:bg-muted/50" data-mock="true">
                                    <td class="py-3 px-4 text-foreground">2024-01-15</td>
                                    <td class="py-3 px-4 text-foreground">Mathematics</td>
                                    <td class="py-3 px-4 text-muted-foreground">Dr. Anderson</td>
                                    <td class="py-3 px-4 text-center">
                                        <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-secondary/10 text-secondary">
                                            <span class="attendance-status status-present"></span>Present
                                        </span>
                                    </td>
                                </tr>
                                <tr class="border-b border-border hover:bg-muted/50" data-mock="true">
                                    <td class="py-3 px-4 text-foreground">2024-01-14</td>
                                    <td class="py-3 px-4 text-foreground">Physics</td>
                                    <td class="py-3 px-4 text-muted-foreground">Prof. Johnson</td>
                                    <td class="py-3 px-4 text-center">
                                        <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-destructive/10 text-destructive">
                                            <span class="attendance-status status-absent"></span>Absent
                                        </span>
                                    </td>
                                </tr>
                                <tr class="border-b border-border hover:bg-muted/50" data-mock="true">
                                    <td class="py-3 px-4 text-foreground">2024-01-13</td>
                                    <td class="py-3 px-4 text-foreground">Chemistry</td>
                                    <td class="py-3 px-4 text-muted-foreground">Dr. Smith</td>
                                    <td class="py-3 px-4 text-center">
                                        <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-secondary/10 text-secondary">
                                            <span class="attendance-status status-present"></span>Present
                                        </span>
                                    </td>
                                </tr>
                                <tr class="border-b border-border hover:bg-muted/50" data-mock="true">
                                    <td class="py-3 px-4 text-foreground">2024-01-12</td>
                                    <td class="py-3 px-4 text-foreground">Computer Science</td>
                                    <td class="py-3 px-4 text-muted-foreground">Prof. Davis</td>
                                    <td class="py-3 px-4 text-center">
                                        <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-secondary/10 text-secondary">
                                            <span class="attendance-status status-present"></span>Present
                                        </span>
                                    </td>
                                </tr>
                                <tr class="border-b border-border hover:bg-muted/50" data-mock="true">
                                    <td class="py-3 px-4 text-foreground">2024-01-11</td>
                                    <td class="py-3 px-4 text-foreground">Mathematics</td>
                                    <td class="py-3 px-4 text-muted-foreground">Dr. Anderson</td>
                                    <td class="py-3 px-4 text-center">
                                        <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-secondary/10 text-secondary">
                                            <span class="attendance-status status-present"></span>Present
                                        </span>
                                    </td>
                                </tr>
                                <!-- @END_MAP )) -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Subject-wise Summary -->
            <div class="mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                <div class="bg-card rounded-lg shadow-sm border border-border p-4">
                    <h4 class="text-sm font-medium text-muted-foreground mb-2">Mathematics</h4>
                    <div class="flex items-center justify-between">
                        <span class="text-lg font-semibold text-foreground">92%</span>
                        <span class="text-xs text-muted-foreground">23/25</span>
                    </div>
                    <div class="w-full bg-muted rounded-full h-2 mt-2">
                        <div class="bg-secondary h-2 rounded-full" style="width: 92%"></div>
                    </div>
                </div>
                
                <div class="bg-card rounded-lg shadow-sm border border-border p-4">
                    <h4 class="text-sm font-medium text-muted-foreground mb-2">Physics</h4>
                    <div class="flex items-center justify-between">
                        <span class="text-lg font-semibold text-foreground">88%</span>
                        <span class="text-xs text-muted-foreground">22/25</span>
                    </div>
                    <div class="w-full bg-muted rounded-full h-2 mt-2">
                        <div class="bg-secondary h-2 rounded-full" style="width: 88%"></div>
                    </div>
                </div>
                
                <div class="bg-card rounded-lg shadow-sm border border-border p-4">
                    <h4 class="text-sm font-medium text-muted-foreground mb-2">Chemistry</h4>
                    <div class="flex items-center justify-between">
                        <span class="text-lg font-semibold text-foreground">84%</span>
                        <span class="text-xs text-muted-foreground">21/25</span>
                    </div>
                    <div class="w-full bg-muted rounded-full h-2 mt-2">
                        <div class="bg-accent h-2 rounded-full" style="width: 84%"></div>
                    </div>
                </div>
                
                <div class="bg-card rounded-lg shadow-sm border border-border p-4">
                    <h4 class="text-sm font-medium text-muted-foreground mb-2">Computer Science</h4>
                    <div class="flex items-center justify-between">
                        <span class="text-lg font-semibold text-foreground">96%</span>
                        <span class="text-xs text-muted-foreground">24/25</span>
                    </div>
                    <div class="w-full bg-muted rounded-full h-2 mt-2">
                        <div class="bg-secondary h-2 rounded-full" style="width: 96%"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- @END_COMPONENT: StudentView -->

    <script>
        // Mock data and state management
        let currentUser = null;
        let currentView = 'login';
        
        // Set today's date as default
        document.getElementById('attendance-date').valueAsDate = new Date();
        
        // @FUNCTIONALITY: Authentication and role-based navigation
        function handleLogin(event) {
            event.preventDefault();
            
            const role = document.getElementById('user-role').value;
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            
            // TODO: Implement actual authentication with backend API
            if (role && email && password) {
                currentUser = {
                    role: role,
                    email: email,
                    name: role === 'teacher' ? 'Dr. John Smith' : 'Sarah Wilson'
                };
                
                showView(role === 'teacher' ? 'teacher' : 'student');
                document.getElementById('user-name').textContent = currentUser.name;
                document.getElementById('app-header').style.display = 'block';
                document.getElementById('login-error').classList.add('hidden');
            } else {
                document.getElementById('login-error').classList.remove('hidden');
            }
        }
        
        function logout() {
            currentUser = null;
            showView('login');
            document.getElementById('app-header').style.display = 'none';
            document.querySelector('#login-view form').reset();
        }
        
        function showView(viewName) {
            document.querySelectorAll('.view').forEach(view => {
                view.classList.remove('active');
            });
            
            if (viewName === 'login') {
                document.getElementById('login-view').classList.add('active');
            } else if (viewName === 'teacher') {
                document.getElementById('teacher-view').classList.add('active');
            } else if (viewName === 'student') {
                document.getElementById('student-view').classList.add('active');
            }
            
            currentView = viewName;
        }
        
        // @FUNCTIONALITY: Teacher dashboard functionality
        function loadSemesters() {
            const batchSelect = document.getElementById('batch-select');
            const semesterSelect = document.getElementById('semester-select');
            
            semesterSelect.innerHTML = '<option value="">Select Semester</option>';
            
            if (batchSelect.value) {
                // TODO: Load actual semesters from API based on batch
                const semesters = ['1', '2', '3', '4', '5', '6', '7', '8'];
                semesters.forEach(sem => {
                    semesterSelect.innerHTML += `<option value="${sem}">Semester ${sem}</option>`;
                });
                semesterSelect.disabled = false;
            } else {
                semesterSelect.disabled = true;
                document.getElementById('subject-select').disabled = true;
            }
        }
        
        function loadSubjects() {
            const semesterSelect = document.getElementById('semester-select');
            const subjectSelect = document.getElementById('subject-select');
            
            subjectSelect.innerHTML = '<option value="">Select Subject</option>';
            
            if (semesterSelect.value) {
                // TODO: Load actual subjects from API based on semester
                const subjects = [
                    { value: 'mathematics', name: 'Mathematics' },
                    { value: 'physics', name: 'Physics' },
                    { value: 'chemistry', name: 'Chemistry' },
                    { value: 'computer-science', name: 'Computer Science' }
                ];
                
                subjects.forEach(subject => {
                    subjectSelect.innerHTML += `<option value="${subject.value}">${subject.name}</option>`;
                });
                subjectSelect.disabled = false;
            } else {
                subjectSelect.disabled = true;
            }
        }
        
        function loadStudents() {
            // TODO: Implement dynamic student loading based on selections
            console.log('Loading students for selected class and subject...');
        }
        
        function loadAttendance() {
            const batch = document.getElementById('batch-select').value;
            const semester = document.getElementById('semester-select').value;
            const subject = document.getElementById('subject-select').value;
            const date = document.getElementById('attendance-date').value;
            
            if (batch && semester && subject && date) {
                // TODO: Load actual attendance data from API
                document.getElementById('student-list-container').classList.remove('hidden');
                document.getElementById('attendance-summary').classList.remove('hidden');
                document.getElementById('attendance-info').textContent = `${batch} | Semester ${semester} | ${subject} | ${date}`;
                
                // Enable action buttons
                document.querySelectorAll('button[onclick*="markAll"], button[onclick*="saveAttendance"]').forEach(btn => {
                    btn.disabled = false;
                });
                
                updateAttendanceSummary();
            } else {
                alert('Please select all required fields');
            }
        }
        
        function markAttendance(button, status) {
            const row = button.closest('tr');
            const buttons = row.querySelectorAll('button');
            
            // Reset button states
            buttons.forEach(btn => {
                btn.classList.remove('opacity-50');
                btn.disabled = false;
            });
            
            // Mark selected button
            button.classList.add('opacity-50');
            button.disabled = true;
            
            // Store attendance status
            row.dataset.attendance = status;
            
            updateAttendanceSummary();
        }
        
        function markAllPresent() {
            const presentButtons = document.querySelectorAll('button[onclick*="present"]');
            presentButtons.forEach(btn => {
                markAttendance(btn, 'present');
            });
        }
        
        function saveAttendance() {
            // TODO: Implement save functionality with API call
            const attendanceData = [];
            document.querySelectorAll('#student-table-body tr').forEach(row => {
                if (row.dataset.attendance) {
                    attendanceData.push({
                        studentId: row.cells[0].textContent,
                        status: row.dataset.attendance
                    });
                }
            });
            
            console.log('Saving attendance:', attendanceData);
            alert('Attendance saved successfully!');
        }
        
        function updateAttendanceSummary() {
            let present = 0, absent = 0, total = 0;
            
            document.querySelectorAll('#student-table-body tr').forEach(row => {
                total++;
                if (row.dataset.attendance === 'present') present++;
                else if (row.dataset.attendance === 'absent') absent++;
            });
            
            document.getElementById('present-count').textContent = present;
            document.getElementById('absent-count').textContent = absent;
            document.getElementById('total-count').textContent = total;
        }
        
        // @FUNCTIONALITY: Student view functionality
        function filterStudentAttendance() {
            // TODO: Implement filtering logic for student attendance records
            const subject = document.getElementById('student-subject-filter').value;
            const fromDate = document.getElementById('from-date').value;
            const toDate = document.getElementById('to-date').value;
            
            console.log('Filtering attendance with:', { subject, fromDate, toDate });
        }
        
        // @FUNCTIONALITY: Search functionality
        document.getElementById('student-search')?.addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            const rows = document.querySelectorAll('#student-table-body tr');
            
            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(searchTerm) ? '' : 'none';
            });
        });
        
        // Initialize the application
        (() => {
            // Set focus on first input
            document.getElementById('user-role').focus();
            
            // Add keyboard navigation
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' && currentView === 'login') {
                    const form = document.querySelector('#login-view form');
                    if (form.checkValidity()) {
                        handleLogin(e);
                    }
                }
            });
        })();
    </script>
</body>
</html>